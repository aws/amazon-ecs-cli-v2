# Your application name will be used in naming your resources
# like log groups, services, etc.
name: {{.Name}}
# The "Type" of the application you're running. For a list of all types that we support see
# https://github.com/aws/PRIVATE-amazon-ecs-archer/app/template/manifest/
type: {{.Type}}

# The port exposed through your container. We need to know
# this so that we can route traffic to it.
containerPort: {{.ContainerPort}}

# Size of CPU
cpu: {{.CPU}}

# Size of memory
memory: {{.Memory}}

# Logging is enabled by default. We'll create a loggroup that is
# the {{.Name}}/Stage
logging: {{.Logging}}

# Determines whether the application will have a public IP or not.
public: {{.Public}}

# You can also pass in environment variables as key/value pairs
#environment-variables:
#  dog: 'Clyde'
#  cute: 'hekya'
#
# Additional Sidecar apps that can run along side your main application
#sidecars:
#  fluentbit:
#    containerPort: 80
#    image: 'amazon/aws-for-fluent-bit:1.2.0'
#    memory: 512
{{$length := len .Stages}}{{if gt $length 0}}
# This section defines each of the release stages
# and their specific configuration for your app.
stages:{{range .Stages}}
  -
    # The "environment" (cluster/vpc/lb) to contain this service.
    env: {{.EnvName}}
    # The number of tasks that we want, at minimum.
    desiredCount: {{.DesiredCount}}
    # Any secrets via ARNs
    #secrets:
    #  lemonaidpassword: arn:aws:secretsmanager:us-west-2:902697171733:secret:DavidsLemons/DavidsFrontEnd{{end}}
{{end}}