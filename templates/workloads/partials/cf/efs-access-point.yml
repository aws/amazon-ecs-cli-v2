{{- if .Storage}}
{{- if .Storage.CopilotVolumeInfo}}
AccessPoint:
  Type: AWS::EFS::AccessPoint
  Properties:
    ClientToken: String
    FileSystemId: 
      Fn::ImportValue:
        !Sub '${AppName}-${EnvName}-FilesystemID'
    PosixUser: 
      Uid: {{.Storage.CopilotVolumeInfo.UID}}
      Gid: {{.Storage.CopilotVolumeInfo.GID}}
    RootDirectory: 
      Path: !Sub '/${WorkloadName}'
      CreationInfo:
        OwnerUid: {{.Storage.CopilotVolumeInfo.UID}}
        OwnerGid: {{.Storage.CopilotVolumeInfo.GID}}
        Permissions: 0755
{{- end}}
{{- end}}